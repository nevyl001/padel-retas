{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{createPlayer,getPlayers,deletePlayer}from\"../lib/database\";import{CompactPlayerGrid}from\"./CompactPlayerGrid\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const PlayerManager=_ref=>{let{onPlayerSelect,selectedPlayers=[],allowMultipleSelection=false,playersInPairs=[]}=_ref;const[players,setPlayers]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(\"\");const[showCreateForm,setShowCreateForm]=useState(false);const[newPlayerName,setNewPlayerName]=useState(\"\");useEffect(()=>{loadPlayers();},[]);const loadPlayers=async()=>{try{setLoading(true);const data=await getPlayers();setPlayers(data);}catch(err){setError(\"Error al cargar los jugadores\");console.error(err);}finally{setLoading(false);}};const handleCreatePlayer=async e=>{e.preventDefault();if(!newPlayerName.trim())return;try{setError(\"\");const player=await createPlayer(newPlayerName.trim());setPlayers([...players,player]);setNewPlayerName(\"\");setShowCreateForm(false);}catch(err){setError(\"Error al crear el jugador\");console.error(err);}};const handleDeletePlayer=async id=>{if(!window.confirm(\"¬øEst√°s seguro de que quieres eliminar este jugador? Esta acci√≥n no se puede deshacer.\")){return;}try{setError(\"\");await deletePlayer(id);setPlayers(players.filter(p=>p.id!==id));}catch(err){setError(\"Error al eliminar el jugador\");console.error(err);}};const handlePlayerSelect=player=>{// Verificar si el jugador ya est√° en una pareja\nif(playersInPairs.includes(player.id)){console.log(`üö® JUGADOR BLOQUEADO: ${player.name} ya est√° en una pareja`);alert(`No puedes seleccionar a ${player.name} porque ya est√° en una pareja. Debes eliminar su pareja actual primero.`);return;}if(onPlayerSelect){if(allowMultipleSelection){const isSelected=selectedPlayers.some(p=>p.id===player.id);if(isSelected){// Deseleccionar el jugador si ya est√° seleccionado\nonPlayerSelect(selectedPlayers.filter(p=>p.id!==player.id));}else{onPlayerSelect([...selectedPlayers,player]);}}else{onPlayerSelect([player]);}}};const isPlayerSelected=player=>{return selectedPlayers.some(p=>p.id===player.id);};const isPlayerInPair=player=>{return playersInPairs.includes(player.id);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Cargando jugadores...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"player-manager\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"player-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDC65 Gesti\\xF3n de Jugadores\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCreateForm(!showCreateForm),className:\"create-player-btn\",children:showCreateForm?\"‚ùå Cancelar\":\"‚ûï Agregar Jugador\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error}),showCreateForm&&/*#__PURE__*/_jsxs(\"div\",{className:\"create-player-form\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Agregar Nuevo Jugador\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleCreatePlayer,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"player-name\",children:\"Nombre del Jugador:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"player-name\",type:\"text\",value:newPlayerName,onChange:e=>setNewPlayerName(e.target.value),placeholder:\"Ej: Juan P\\xE9rez\",required:true,autoFocus:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn\",children:\"\\u2705 Agregar Jugador\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowCreateForm(false);setNewPlayerName(\"\");},className:\"cancel-btn\",children:\"\\u274C Cancelar\"})]})]})]}),players.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"no-players\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\uD83D\\uDCDD No hay jugadores registrados a\\xFAn\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Agrega jugadores para poder crear parejas\"})]}):/*#__PURE__*/_jsx(CompactPlayerGrid,{players:players,onPlayerSelect:handlePlayerSelect,onDeletePlayer:handleDeletePlayer,selectedPlayers:selectedPlayers,playersInPairs:playersInPairs})]});};","map":{"version":3,"names":["React","useState","useEffect","createPlayer","getPlayers","deletePlayer","CompactPlayerGrid","jsx","_jsx","jsxs","_jsxs","PlayerManager","_ref","onPlayerSelect","selectedPlayers","allowMultipleSelection","playersInPairs","players","setPlayers","loading","setLoading","error","setError","showCreateForm","setShowCreateForm","newPlayerName","setNewPlayerName","loadPlayers","data","err","console","handleCreatePlayer","e","preventDefault","trim","player","handleDeletePlayer","id","window","confirm","filter","p","handlePlayerSelect","includes","log","name","alert","isSelected","some","isPlayerSelected","isPlayerInPair","className","children","onClick","onSubmit","htmlFor","type","value","onChange","target","placeholder","required","autoFocus","length","onDeletePlayer"],"sources":["/Users/nedev/padel-tournament-app/src/components/PlayerManager.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  createPlayer,\n  getPlayers,\n  deletePlayer,\n  Player,\n} from \"../lib/database\";\nimport { CompactPlayerGrid } from \"./CompactPlayerGrid\";\n\ninterface PlayerManagerProps {\n  onPlayerSelect?: (players: Player[]) => void;\n  selectedPlayers?: Player[];\n  allowMultipleSelection?: boolean;\n  playersInPairs?: string[]; // IDs de jugadores que ya est√°n en parejas\n}\n\nexport const PlayerManager: React.FC<PlayerManagerProps> = ({\n  onPlayerSelect,\n  selectedPlayers = [],\n  allowMultipleSelection = false,\n  playersInPairs = [],\n}) => {\n  const [players, setPlayers] = useState<Player[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string>(\"\");\n  const [showCreateForm, setShowCreateForm] = useState(false);\n  const [newPlayerName, setNewPlayerName] = useState(\"\");\n\n  useEffect(() => {\n    loadPlayers();\n  }, []);\n\n  const loadPlayers = async () => {\n    try {\n      setLoading(true);\n      const data = await getPlayers();\n      setPlayers(data);\n    } catch (err) {\n      setError(\"Error al cargar los jugadores\");\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCreatePlayer = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!newPlayerName.trim()) return;\n\n    try {\n      setError(\"\");\n      const player = await createPlayer(newPlayerName.trim());\n      setPlayers([...players, player]);\n      setNewPlayerName(\"\");\n      setShowCreateForm(false);\n    } catch (err) {\n      setError(\"Error al crear el jugador\");\n      console.error(err);\n    }\n  };\n\n  const handleDeletePlayer = async (id: string) => {\n    if (\n      !window.confirm(\n        \"¬øEst√°s seguro de que quieres eliminar este jugador? Esta acci√≥n no se puede deshacer.\"\n      )\n    ) {\n      return;\n    }\n\n    try {\n      setError(\"\");\n      await deletePlayer(id);\n      setPlayers(players.filter((p) => p.id !== id));\n    } catch (err) {\n      setError(\"Error al eliminar el jugador\");\n      console.error(err);\n    }\n  };\n\n  const handlePlayerSelect = (player: Player) => {\n    // Verificar si el jugador ya est√° en una pareja\n    if (playersInPairs.includes(player.id)) {\n      console.log(`üö® JUGADOR BLOQUEADO: ${player.name} ya est√° en una pareja`);\n      alert(\n        `No puedes seleccionar a ${player.name} porque ya est√° en una pareja. Debes eliminar su pareja actual primero.`\n      );\n      return;\n    }\n\n    if (onPlayerSelect) {\n      if (allowMultipleSelection) {\n        const isSelected = selectedPlayers.some((p) => p.id === player.id);\n        if (isSelected) {\n          // Deseleccionar el jugador si ya est√° seleccionado\n          onPlayerSelect(selectedPlayers.filter((p) => p.id !== player.id));\n        } else {\n          onPlayerSelect([...selectedPlayers, player]);\n        }\n      } else {\n        onPlayerSelect([player]);\n      }\n    }\n  };\n\n  const isPlayerSelected = (player: Player) => {\n    return selectedPlayers.some((p) => p.id === player.id);\n  };\n\n  const isPlayerInPair = (player: Player) => {\n    return playersInPairs.includes(player.id);\n  };\n\n  if (loading) {\n    return <div className=\"loading\">Cargando jugadores...</div>;\n  }\n\n  return (\n    <div className=\"player-manager\">\n      <div className=\"player-header\">\n        <h3>üë• Gesti√≥n de Jugadores</h3>\n        <button\n          onClick={() => setShowCreateForm(!showCreateForm)}\n          className=\"create-player-btn\"\n        >\n          {showCreateForm ? \"‚ùå Cancelar\" : \"‚ûï Agregar Jugador\"}\n        </button>\n      </div>\n\n      {error && <div className=\"error\">{error}</div>}\n\n      {showCreateForm && (\n        <div className=\"create-player-form\">\n          <h4>Agregar Nuevo Jugador</h4>\n          <form onSubmit={handleCreatePlayer}>\n            <div className=\"form-group\">\n              <label htmlFor=\"player-name\">Nombre del Jugador:</label>\n              <input\n                id=\"player-name\"\n                type=\"text\"\n                value={newPlayerName}\n                onChange={(e) => setNewPlayerName(e.target.value)}\n                placeholder=\"Ej: Juan P√©rez\"\n                required\n                autoFocus\n              />\n            </div>\n\n            <div className=\"form-actions\">\n              <button type=\"submit\" className=\"submit-btn\">\n                ‚úÖ Agregar Jugador\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => {\n                  setShowCreateForm(false);\n                  setNewPlayerName(\"\");\n                }}\n                className=\"cancel-btn\"\n              >\n                ‚ùå Cancelar\n              </button>\n            </div>\n          </form>\n        </div>\n      )}\n\n      {players.length === 0 ? (\n        <div className=\"no-players\">\n          <p>üìù No hay jugadores registrados a√∫n</p>\n          <p>Agrega jugadores para poder crear parejas</p>\n        </div>\n      ) : (\n        <CompactPlayerGrid\n          players={players}\n          onPlayerSelect={handlePlayerSelect}\n          onDeletePlayer={handleDeletePlayer}\n          selectedPlayers={selectedPlayers}\n          playersInPairs={playersInPairs}\n        />\n      )}\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}